<div class="d-flex flex-row page-with-sidebar" dir="rtl">
  <div class="sidebar-col">
    <app-admin-sidebar></app-admin-sidebar>
  </div>

  <div class="content-col">
    <div class="container-fluid py-4">
      <div class="d-flex flex-row align-items-center justify-content-between mb-3">
        <div class="d-flex align-items-center gap-2">
          <label class="mb-0 fw-semibold">فلتر:</label>
          <select class="form-select form-select-sm"   [(ngModel)]="filterType"  (ngModelChange)="filteredPoints($event)">
            <option value="all">الكل</option>
            <option value="gather">نقط الحشد</option>
            <option value="schools">المدارس</option>
            <option value="payment">نقط الصرف</option>
          </select>
        </div>

        <!-- optional: show count of visible items -->
        <div class="text-muted small" hidden>
          {{ (filteredPoints?.length || 0) }} نتيجة
        </div>
      </div>
      <div class="row g-3 align-items-stretch">
        <ng-container *ngIf="pointsTotalCount?.length; else emptyState">
          <div *ngFor="let item of pointsTotalCount" class="col-12 col-sm-6 col-md-4 col-lg-3 d-flex" role="listitem"
            [attr.aria-label]="item.operation + ' - ' + item.totalCount">
            <div class="card-container w-100" role="article" tabindex="0">
              <div class="card-top">
                <div class="count" aria-hidden="true">{{ item.totalCount }}</div>
                <div class="operation">{{ item.operation }}</div>
              </div>
              <div class="card-footer">
                <button class="btn btn-sm btn-link" (click)="openPointDetails?.(item)" *ngIf="openPointDetails">
                  عرض التفاصيل
                </button>
              </div>
            </div>
          </div>
        </ng-container>

        <ng-template #emptyState>
          <div class="col-12">
            <div class="empty-state">
              لا توجد بيانات لعرضها حالياً
            </div>
          </div>
        </ng-template>
      </div>
    </div>
  </div>
</div>